<html>
<head>
        <link rel="manifest" href="manifest.json">
</head>
<body>

<h1 id='hi'></h1>

</body>

<script>
        'use strict';

        if ('serviceWorker' in navigator) {
            console.log('Service Worker is supported');
            navigator.serviceWorker.register('sw.js').then(function (reg) {
                console.log(':^)', reg);
                reg.pushManager.subscribe({
                    userVisibleOnly: true
                }).then(function (sub) {
                    console.log('endpoint:', sub.endpoint);
                    document.getElementById('hi').innerText = sub.endpoint.substring(40); 

    //                 $.ajax({
    //                     url: 'home/saveRegId',
    //                     data: { regId: sub.endpoint }
    //                 }).done(function () {
                        
    //   //                  alert('Added');
    //                 });

                });
            }).catch(function (err) {
                console.log(':^(', err);
            });
        }
    </script>


</html>


